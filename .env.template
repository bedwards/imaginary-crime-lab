# Environment Variables Template for Imaginary Crime Lab
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control

# ============================================================================
# Neon Postgres
# ============================================================================
# Get this from: https://console.neon.tech → Your Project → Connection Details
# Format: postgresql://[user]:[password]@[endpoint]/[database]?sslmode=require

NEON_DATABASE_URL=postgresql://user:password@ep-xxx-xxx.us-east-2.aws.neon.tech/crimelab?sslmode=require

# ============================================================================
# MongoDB Atlas
# ============================================================================
# Get this from: MongoDB Atlas → Database → Connect → Connect your application
# Format: mongodb+srv://[username]:[password]@[cluster].mongodb.net/[database]

MONGODB_URI=mongodb+srv://crimelab:password@cluster0.xxxxx.mongodb.net/crimelab?retryWrites=true&w=majority

# ============================================================================
# Shopify
# ============================================================================
# Store domain (without https://)
SHOPIFY_STORE_DOMAIN=your-store.myshopify.com

# Storefront API Access Token
# Get this from: Shopify Admin → Apps → Develop apps → Create app
# → Configuration → Storefront API → Create access token
SHOPIFY_STOREFRONT_TOKEN=shpat_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Admin API Access Token
# Get this from: Same app → API credentials → Admin API access token
SHOPIFY_ADMIN_TOKEN=shpat_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ============================================================================
# Cloudflare Workers
# ============================================================================
# Account ID from Cloudflare dashboard
CLOUDFLARE_ACCOUNT_ID=your-account-id-here

# API Token for Wrangler deployments
# Get this from: Cloudflare Dashboard → My Profile → API Tokens
# Template: Edit Cloudflare Workers
CLOUDFLARE_API_TOKEN=your-api-token-here

# ============================================================================
# Frontend
# ============================================================================
# Base URL for Worker API (change after deployment)
VITE_API_BASE=http://localhost:8787

# For production builds:
# VITE_API_BASE=https://crime-lab-api.your-worker.workers.dev

# ============================================================================
# GitHub Pages (for deployment)
# ============================================================================
# Your GitHub username/org
GITHUB_USERNAME=yourusername

# Repository name
GITHUB_REPO=imaginary-crime-lab

# ============================================================================
# Local Development
# ============================================================================
# These are used by docker-compose.yml and work out of the box
# No need to change unless you want different credentials

DEV_POSTGRES_USER=crimelab
DEV_POSTGRES_PASSWORD=local_dev_password
DEV_POSTGRES_DB=crimelab

DEV_MONGODB_USER=crimelab
DEV_MONGODB_PASSWORD=local_dev_password
DEV_MONGODB_DB=crimelab

# ============================================================================
# Setup Instructions
# ============================================================================

# 1. Neon Setup:
#    - Sign up at https://neon.tech
#    - Create new project
#    - Create database named 'crimelab'
#    - Copy connection string
#    - Run neon-schema.sql in SQL Editor

# 2. MongoDB Atlas Setup:
#    - Sign up at https://cloud.mongodb.com
#    - Create free M0 cluster (or M10+ for Change Streams)
#    - Create database user
#    - Whitelist IP: 0.0.0.0/0 (or Cloudflare IPs)
#    - Copy connection string
#    - Run mongodb-init.js commands

# 3. Shopify Setup:
#    - Create Shopify Partner account
#    - Create development store
#    - Apps → Develop apps → Create app
#    - Configure Storefront API scopes:
#      * unauthenticated_read_products
#      * unauthenticated_read_product_listings
#      * unauthenticated_write_checkouts
#    - Configure Admin API scopes:
#      * read_products
#      * write_products
#      * read_orders
#      * write_orders
#    - Generate access tokens
#    - Create products for evidence items

# 4. Cloudflare Setup:
#    - Sign up at https://cloudflare.com
#    - Create account
#    - Get Account ID from dashboard
#    - Create API token for Wrangler

# 5. Deploy Worker:
#    wrangler secret put NEON_DATABASE_URL
#    wrangler secret put MONGODB_URI
#    wrangler secret put SHOPIFY_STOREFRONT_TOKEN
#    wrangler secret put SHOPIFY_ADMIN_TOKEN
#    wrangler deploy

# 6. Configure Shopify Webhook:
#    - Shopify Admin → Settings → Notifications → Webhooks
#    - Event: Order creation
#    - Format: JSON
#    - URL: https://your-worker.workers.dev/webhook/order

# 7. Deploy Frontend:
#    - Update VITE_API_BASE in .env
#    - npm run build
#    - Deploy to GitHub Pages

# ============================================================================
# Security Notes
# ============================================================================

# - NEVER commit this file with real credentials
# - Use Wrangler secrets for Worker env vars (not wrangler.toml)
# - Rotate tokens periodically
# - Use different credentials for dev/prod
# - MongoDB: whitelist specific IPs in production
# - Shopify: use minimum required API scopes

# ============================================================================
